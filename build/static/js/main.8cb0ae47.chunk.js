(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{106:function(t,e,n){},107:function(t,e,n){"use strict";n.r(e);var r,c,a,u,o,s=n(0),i=n.n(s),b=n(29),j=n.n(b),l=n(20),O=n(10),d=n(48),f=n(21),g=n(4),p=n(17),h=n(49),v=n.n(h),x=n(3),m=n(9),_=n(22),S=Object(g.c)([],(r={},Object(x.a)(r,_.i,(function(t,e){return e.payload})),Object(x.a)(r,_.c,(function(t,e){var n=e.payload;return[].concat(Object(f.a)(t),[n])})),Object(x.a)(r,_.f,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),k=Object(g.c)("",Object(x.a)({},_.j,(function(t,e){return e.payload}))),C=Object(m.b)({items:S,filter:k}),y=n(6),E=n(2),w={name:"",email:"",loading:!1},N=null,R=Object(g.c)(w,(c={},Object(x.a)(c,E.a.registerRequest,(function(t){return Object(y.a)(Object(y.a)({},t),{},{loading:!0})})),Object(x.a)(c,E.a.loginRequest,(function(t){return Object(y.a)(Object(y.a)({},t),{},{loading:!0})})),Object(x.a)(c,E.a.registerSuccess,(function(t,e){return e.payload.user})),Object(x.a)(c,E.a.loginSuccess,(function(t,e){return e.payload.user})),Object(x.a)(c,E.a.registerError,(function(t){return Object(y.a)(Object(y.a)({},t),{},{loading:!1})})),Object(x.a)(c,E.a.loginError,(function(t){return Object(y.a)(Object(y.a)({},t),{},{loading:!1})})),Object(x.a)(c,E.a.logoutRequest,(function(t){return Object(y.a)(Object(y.a)({},t),{},{loading:!1})})),Object(x.a)(c,E.a.logoutSuccess,(function(){return w})),Object(x.a)(c,E.a.logoutError,(function(t){return Object(y.a)(Object(y.a)({},t),{},{loading:!1})})),Object(x.a)(c,E.a.getCurrentUserSuccess,(function(t,e){return e.payload})),c)),q=Object(g.c)(null,(a={},Object(x.a)(a,E.a.registerSuccess,(function(t,e){return e.payload.token})),Object(x.a)(a,E.a.loginSuccess,(function(t,e){return e.payload.token})),Object(x.a)(a,E.a.logoutSuccess,(function(){return null})),a)),U=Object(g.c)(N,(u={},Object(x.a)(u,E.a.registerError,(function(t,e){return e.payload})),Object(x.a)(u,E.a.registerSuccess,(function(){return N})),Object(x.a)(u,E.a.loginError,(function(t,e){return e.payload})),Object(x.a)(u,E.a.loginSuccess,(function(){return N})),Object(x.a)(u,E.a.logoutError,(function(t,e){return e.payload})),Object(x.a)(u,E.a.logoutSuccess,(function(){return N})),Object(x.a)(u,E.a.getCurrentUserError,(function(t,e){return e.payload})),u)),A=Object(g.c)(!1,(o={},Object(x.a)(o,E.a.registerSuccess,(function(){return!0})),Object(x.a)(o,E.a.loginSuccess,(function(){return!0})),Object(x.a)(o,E.a.getCurrentUserSuccess,(function(){return!0})),Object(x.a)(o,E.a.registerError,(function(){return!1})),Object(x.a)(o,E.a.loginError,(function(){return!1})),Object(x.a)(o,E.a.getCurrentUserError,(function(){return!1})),Object(x.a)(o,E.a.logoutSuccess,(function(){return!1})),o)),T=Object(m.b)({user:R,isAuthenticated:A,token:q,error:U}),M=Object(f.a)(Object(g.d)({serializableCheck:{ignoredActions:[p.a,p.f,p.b,p.c,p.d,p.e]}})),z={key:"token",storage:v.a,whitelist:["token"]},L=Object(g.a)({reducer:{contacts:C,auth:Object(p.g)(z,T)},middleware:M,devTools:!1}),B={store:L,persistor:Object(p.h)(L)},I=n(8),D=n(108),F=n(32),J=n.n(F),W=n(1),H=function(t){var e=t.to,n=t.text;return Object(W.jsx)("li",{className:J.a.navbarMenuLink,children:Object(W.jsx)(l.b,{exact:!0,to:e,className:J.a.navbarMenuLink,activeClassName:J.a.active,children:n})})},K=[{to:"/",text:"Home"},{to:"/contacts",text:"Contacts"}],Q=n(50),X=n.n(Q),Y=function(t){var e=(t.isAuthenticated?Object(f.a)(K):K.filter((function(t){return"Contacts"!==t.text}))).map((function(t){return Object(W.jsx)(H,Object(y.a)({},t),Object(D.a)())}));return Object(W.jsx)("ul",{className:X.a.nav,children:e})},G=Object(s.memo)(Y),P=n(18),V=n(28),Z=n(39),$=n.p+"static/media/avatar.696e758a.jpg",tt=n(26),et=n.n(tt),nt=function(){var t=Object(O.e)((function(t){return Object(P.b)(t)}),O.c),e=$,n=Object(O.d)();return Object(W.jsxs)("div",{className:et.a.container,children:[Object(W.jsx)("img",{src:e,alt:"",width:"32",className:et.a.avatar}),Object(W.jsxs)("span",{className:et.a.name,children:["Welcome, ",t]}),Object(W.jsx)(Z.a,{onClick:function(){return n(Object(V.c)())},className:et.a.btn,children:"Logout"})]})},rt=[{to:"/register",text:"Sign up"},{to:"/login",text:"Log in"}],ct=n(52),at=n.n(ct),ut=function(){var t=rt.map((function(t){return Object(W.jsx)(H,Object(y.a)({},t),Object(D.a)())}));return Object(W.jsx)("ul",{className:at.a.nav,children:t})},ot=n(37),st=n.n(ot),it=function(){var t=Object(O.e)((function(t){return Object(P.a)(t)}),O.c);return Object(W.jsx)("nav",{className:"navbar",children:Object(W.jsx)("div",{className:st.a.container,children:Object(W.jsxs)("div",{className:st.a.navbarRow,children:[Object(W.jsx)(G,{isAuthenticated:t}),t?Object(W.jsx)(nt,{}):Object(W.jsx)(ut,{})]})})})},bt=n(27),jt=Object(O.b)((function(t){return{isAuthenticated:Object(P.a)(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(bt.a)(t,["component","isAuthenticated","redirectTo"]);return Object(W.jsx)(I.b,Object(y.a)(Object(y.a)({},c),{},{render:function(t){return n?Object(W.jsx)(e,Object(y.a)({},t)):Object(W.jsx)(I.a,{to:r})}}))})),lt=Object(O.b)((function(t){return{isAuthenticated:Object(P.a)(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(bt.a)(t,["component","isAuthenticated","redirectTo"]);return Object(W.jsx)(I.b,Object(y.a)(Object(y.a)({},c),{},{render:function(t){return n&&c.restricted?Object(W.jsx)(I.a,{to:r}):Object(W.jsx)(e,Object(y.a)({},t))}}))})),Ot=n(53),dt=n.n(Ot),ft=(n(105),n(54)),gt=n.n(ft);var pt=function(){return Object(W.jsx)("div",{className:gt.a.wrapper,children:Object(W.jsx)(dt.a,{type:"ThreeDots",color:"green",height:100,width:100,timeout:3e3})})},ht=Object(s.lazy)((function(){return n.e(6).then(n.bind(null,123))})),vt=Object(s.lazy)((function(){return n.e(3).then(n.bind(null,120))})),xt=Object(s.lazy)((function(){return n.e(5).then(n.bind(null,121))})),mt=Object(s.lazy)((function(){return n.e(4).then(n.bind(null,122))})),_t=Object(s.lazy)((function(){return n.e(7).then(n.bind(null,124))})),St=function(){return Object(O.d)()(Object(V.a)()),Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(it,{}),Object(W.jsx)(s.Suspense,{fallback:Object(W.jsx)(pt,{}),children:Object(W.jsxs)(I.d,{children:[Object(W.jsx)(I.b,{exact:!0,path:"/",component:ht}),Object(W.jsx)(lt,{exact:!0,path:"/register",restricted:!0,redirectTo:"/contacts",component:xt}),Object(W.jsx)(lt,{exact:!0,path:"/login",restricted:!0,redirectTo:"/contacts",component:mt}),Object(W.jsx)(jt,{exact:!0,path:"/contacts",component:vt,redirectTo:"/login"}),Object(W.jsx)(I.b,{component:_t})]})})]})};n(106);j.a.render(Object(W.jsx)(i.a.StrictMode,{children:Object(W.jsx)(O.a,{store:B.store,children:Object(W.jsx)(l.a,{children:Object(W.jsx)(d.a,{loading:null,persistor:B.persistor,children:Object(W.jsx)(St,{})})})})}),document.getElementById("root"))},18:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c}));var r=function(t){return t.auth.isAuthenticated},c=function(t){return t.auth.user.name}},2:function(t,e,n){"use strict";var r=n(4),c={registerRequest:Object(r.b)("auth/registerRequest"),registerSuccess:Object(r.b)("auth/registerSuccess"),registerError:Object(r.b)("auth/registerError"),loginRequest:Object(r.b)("auth/loginRequest"),loginSuccess:Object(r.b)("auth/loginSuccess"),loginError:Object(r.b)("auth/loginError"),logoutRequest:Object(r.b)("auth/logoutRequest"),logoutSuccess:Object(r.b)("auth/logoutSuccess"),logoutError:Object(r.b)("auth/logoutError"),getCurrentUserRequest:Object(r.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(r.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(r.b)("auth/getCurrentUserError")};e.a=c},22:function(t,e,n){"use strict";n.d(e,"h",(function(){return c})),n.d(e,"i",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i})),n.d(e,"e",(function(){return b})),n.d(e,"f",(function(){return j})),n.d(e,"d",(function(){return l})),n.d(e,"j",(function(){return O}));var r=n(4),c=Object(r.b)("contacts/fetchContactsRequest"),a=Object(r.b)("contacts/fetchContactsSuccess"),u=Object(r.b)("contacts/fetchContactsError"),o=Object(r.b)("contacts/addContactRequest"),s=Object(r.b)("contacts/addContactSuccess"),i=Object(r.b)("contacts/addContactError"),b=Object(r.b)("contacts / deleteContactRequest"),j=Object(r.b)("contacts / deleteContactSuccess"),l=Object(r.b)("contacts / deleteContactError"),O=Object(r.b)("contacts/filter")},26:function(t,e,n){t.exports={container:"UserMenu_container__3imD1",btn:"UserMenu_btn__16jzA",name:"UserMenu_name__2KQd3",avatar:"UserMenu_avatar__7wBEE"}},28:function(t,e,n){"use strict";n.d(e,"d",(function(){return j})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return O})),n.d(e,"a",(function(){return d}));var r=n(16),c=n.n(r),a=n(25),u=n(19),o=n.n(u),s=n(2);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(t){o.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){o.a.defaults.headers.common.Authorization=""},j=function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(s.a.registerRequest()),e.prev=1,e.next=4,o.a.post("/users/signup",t);case 4:r=e.sent,a=r.data,i(a.token),n(s.a.registerSuccess(a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n(s.a.registerError(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},l=function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(s.a.loginRequest()),e.prev=1,e.next=4,o.a.post("/users/login",t);case 4:r=e.sent,a=r.data,i(a.token),n(s.a.loginSuccess(a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n(s.a.loginError(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},O=function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(s.a.logoutRequest()),t.prev=1,t.next=4,o.a.post("/users/logout");case 4:b(),e(s.a.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(s.a.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},d=function(){return function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u,b;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),a=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return i(a),e(s.a.getCurrentUserRequest()),t.prev=5,t.next=8,o.a.get("/users/current");case 8:u=t.sent,b=u.data,e(s.a.getCurrentUserSuccess(b)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),e(s.a.getCurrentUserError(t.t0.message));case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()}},32:function(t,e,n){t.exports={navbarMenuLink:"NavbarMenuItem_navbarMenuLink__3b7iS",active:"NavbarMenuItem_active__1AjOC"}},37:function(t,e,n){t.exports={navbarRow:"Navbar_navbarRow__3TTb_",container:"Navbar_container__qrX73"}},39:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n(0);var r=n(51),c=n.n(r),a=n(1),u=function(t){var e=t.children,n=t.type,r=void 0===n?"button":n,u=t.onClick,o=void 0===u?function(){return null}:u,s=t.className;return Object(a.jsx)("button",{className:"".concat(c.a.btn," ").concat(s),type:r,onClick:o,children:e})}},50:function(t,e,n){t.exports={nav:"NavbarNav_nav__UTxuT"}},51:function(t,e,n){t.exports={btn:"Button_btn__1rFyd"}},52:function(t,e,n){t.exports={nav:"AuthNav_nav__2AnYc"}},54:function(t,e,n){t.exports={wrapper:"Loader_wrapper__2daWs"}}},[[107,1,2]]]);
//# sourceMappingURL=main.8cb0ae47.chunk.js.map